<?xml version="1.0" encoding="utf-8"?>

<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Name="this"
             x:Class="ChecklistApp.Controls.Popup">
    <ContentView.ControlTemplate>
        <ControlTemplate>
            <Grid BindingContext="{x:Reference this}"
                  IsClippedToBounds="False">
                <Border x:Name="overlay"
                        BackgroundColor="Black"
                        Opacity="{Binding Opacity}">
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Tapped="CloseButtonClicked" />
                    </Border.GestureRecognizers>
                </Border>
                <FlexLayout Direction="Column"
                            AlignContent="Stretch"
                            JustifyContent="Center">
                    <Border x:Name="popup"
                            Margin="{Binding PopupMargin}"
                            Scale="{Binding Scale}"
                            BackgroundColor="{StaticResource Background}"
                            StrokeShape="RoundRectangle 16">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer />
                        </Border.GestureRecognizers>
                        <ContentPresenter />
                    </Border>
                </FlexLayout>
            </Grid>
        </ControlTemplate>
    </ContentView.ControlTemplate>
</ContentView>